# AI-Powered Loan Estimate Comparison Application: Technical Specifications

## 1. Project Overview

This document outlines the technical specifications for an AI-powered web application designed to help users compare loan estimates from different lenders. The application will feature a side-by-side comparison view, an integrated chat for communication with a loan officer, and AI-driven recommendations to help users make informed decisions.

## 2. Technology Stack

### Frontend: React.js
- **UI Library**: Tailwind CSS for styling
- **State Management**: React Context or Zustand for managing application state
- **Icons**: Lucide React

### Backend: Node.js
- **Framework**: Express.js for routing and API endpoints
- **Real-time Communication**: Socket.IO or WebSockets for the chat feature
- **AI Integration**: Third-party LLM API (e.g., Anthropic Claude) for analyzing loan data and generating recommendations

## 3. User Interface (UI) and Layout

The application will have a three-part layout: a navigation sidebar on the left, a main content area in the center, and a chat panel on the right.

### 3.1. Sidebar Navigation

**Purpose**: Provides primary navigation for the application.

**Initial Items**:
- A single, selectable item labeled "Comparison". This will be the main view.

**Behavior**: Clicking "Comparison" will ensure the main content area displays the loan estimate comparison interface. It should be highlighted when active.

### 3.2. Main Content Area

This area is vertically divided into two sections.

#### 3.2.1. Top Section: Loan Estimate Comparison

**Layout**: A side-by-side view to compare two loan estimates: Lender A and Lender B.

**Functionality**:
- Each side will have an "Upload Document" button or a form to input data manually
- The comparison table should clearly display corresponding fields next to each other

**Data Fields to Display**:

**Loan Terms**:
- Loan Amount
- Interest Rate
- Loan Term (e.g., 30 years)
- Principal & Interest (P&I)

**Projected Payments**:
- Mortgage Insurance
- Estimated Escrow
- Total Estimated Monthly Payment

**Closing Costs**:
- Loan Costs (Origination Fees, Services You Cannot Shop For, Services You Can Shop For)
- Other Costs (Taxes, Government Fees, Prepaids)
- Total Closing Costs

**Cash to Close**:
- Estimated Cash to Close

**Key Metrics**:
- Annual Percentage Rate (APR)
- In 5 Years (Total you will have paid)

#### 3.2.2. Bottom Section: AI Recommendations

**Purpose**: To display insights and suggestions generated by the AI based on the provided loan estimates.

**Content**: This section will initially be empty. After the user inputs data for both lenders, a "Generate Analysis" button will appear.

**Display Format**: The recommendations should be presented as clear, easy-to-read cards or bullet points, such as:
- **"Cost Savings Alert"**: "Lender B has lower origination fees, saving you $500 upfront."
- **"Interest Rate Insight"**: "Lender A offers a 0.125% lower interest rate, which could save you approximately $12,000 over the life of the loan."
- **"Negotiation Point"**: "Consider asking Lender A to match Lender B's lower appraisal fee."

### 3.3. Right Panel: Chat Interface

**Purpose**: Allows the user to communicate directly with a loan officer or support staff.

**Layout**:
- A message window displaying the conversation history
- A text input field at the bottom for the user to type their message
- A "Send" button

**Message Display**:
- User's messages should be aligned to the right
- Loan officer's messages should be aligned to the left
- Each message should have a timestamp

## 4. Data Flow and Backend Logic

1. **User Input**: The user uploads or manually enters data for two loan estimates via the React frontend
2. **API Call**: The frontend sends the structured JSON data for both estimates to a backend endpoint (e.g., `/api/compare`)
3. **AI Analysis Request**: The Node.js backend formats the loan data into a clear, descriptive prompt and sends it to the Claude API
   - **Example Prompt**: "Analyze these two loan estimates and provide a summary of the key differences, potential savings, and any red flags. Here is the data for Lender A: {...} and Lender B: {...}."
4. **AI Response**: The backend receives the analysis from the AI
5. **Return to Frontend**: The backend sends the AI-generated recommendations back to the frontend
6. **Display**: The React application displays the recommendations in the designated UI section
7. **Chat**: Chat messages are sent to the backend via a WebSocket connection and broadcast to the other party (user/loan officer)